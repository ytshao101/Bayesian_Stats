---
title: "STA602_HW1"
author: "Yutong Shao"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 1. Working with data

a\. load data set

```{r}
# use read.table to read .dat file
rain.df <- read.table('rnf6080.dat')
```

b\. number of rows and columns

`rain.df` has 5070 rows and 27 columns.

```{r}
# There two methods
# 1. report the dimension of the dataframe
dim(rain.df)

# 2. report the number of columns and rows separately
ncols <- ncol(rain.df)
nrows <- nrow(rain.df)
print(ncols)
print(nrows)
```

c\. names of columns

```{r}
# use colnames() function to report column names
print(colnames(rain.df))
```

d\.

To get the value of certain index, simply use [ ] with the first number being row index and the second number being column index. The value at row2, column 4 is 0.

```{r}
# get the value at the second row, fourth column
rain.df[2,4]
```

e\. display the whole second row

```{r}
# show the entire second row
# the space after comma means returning the entire columns
print(rain.df[2,])
```

f\.

```{r}
# original column names
print('Original:')
names(rain.df)

# reset column names
names(rain.df) <- c("year","month","day",seq(0,23))
newcolnames <- colnames(rain.df)

# verify new column names
print('New:')
print(colnames(rain.df))
```

This command is renaming the columns, with the first three being "year","month","day", and the rest are consecutive numbers from 0 to 23.

g\. create a new column

```{r}
# creating a new column named "daily" which equals the sum of 
# column "0" to "23"
rain.df$daily <- rowSums(rain.df[, c(4:ncols)])
```

h\. histogram of daily rainfall amounts

```{r echo=FALSE}
# use hist() function to plot the histogram
hist(rain.df$daily, 
     main='Histogram of daily rainfall amount',
     xlab='Rainfall amount')
```

i\.

There are negative amounts of rainfall in the histogram, which is unrealistic. This is because there are one or more missing values that has been marked as -999 on certain days. So, the histogram above cannot possibly be right.

j\. Fix the data frame

```{r echo=FALSE}
# install.packages(dplyr)
library(dplyr)

```

```{r}
# remove missing values (here we remove all rows 
# that contain value of -999)
newdf <- filter_all(rain.df, all_vars(.!= -999))
print('number of obs after removing missing values:')
nrow(newdf)

# calculate daily rainfall again
newdf$new_daily <- rowSums(newdf[, c(4:ncols)])
hist(newdf$new_daily,
     main='Histogram of daily rainfall amount (new)',
     xlab='Rainfall amount')
```

The new histogram is more reasonable because there is no negative values, and during most days, the rainfall amount is around 0-50, which is close to reality.

## 2. Data types

a\.

```{r}
x <- c("5", "12", "7")   
# this line creates a vector with three characters

max(x)    
# This line finds the 'max' of three characters,
# The sorting rule is comparing each character in each string one by one,
# for example, "7" is the largrest.
# If encounter ties, compare the immediate next character 
# following the same rule

sort(x)   
# this line sorts the characters following the above rule

# sum(x)    # Data type error: cannot add up characters
```

b\.

```{r}
y <- c("5",7,12)
# The output is a vector of three characters
# this is because if the inputs of c() are of different data types, 
# they will all be transformed to the type of the first element,
# which is character here.

print(y)
print(class(y[2]))
print(class(y[3]))      # verify the data type
# y[2] and y[3] are all characters

# y[2] + y[3]
# Data type error: cannot add up characters

```

c\.

```{r}

z <- data.frame(z1="5",z2=7,z3=12)
# This line is creating a dataframe with the first column being a character, "5",
# the second being a number 7, and the third being a number 12,
# column names are z1, z2, z3.

z[1,2] + z[1,3]
# this line is adding up the second and third value in the first row, 
# i.e. 7 + 12 = 19
```

## 3.

a.) A reproducible code is the code that can run directly by copying and pasting.

b.) Reproducible code will be convenient for TAs to verify whether my code make sense and also ensure me getting full scores. For example, imagine I am discussing with my classmates on the homework, if my code cannot be rerun successfully, we will spend extra time debugging, which is inefficient.

c.) 2, this assignment helps us review basic R programming.
